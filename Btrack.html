<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Tracker</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }

        .card h2 {
            font-size: 0.9em;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .card .amount {
            font-size: 2em;
            font-weight: bold;
            color: #333;
        }

        .card.income .amount {
            color: #27ae60;
        }

        .card.expense .amount {
            color: #e74c3c;
        }

        .card.balance .amount {
            color: #667eea;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .section {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }

        .section h2 {
            margin-bottom: 20px;
            color: #333;
            font-size: 1.3em;
        }

        .input-section {
            grid-column: 1 / -1;
        }

        .form-group {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr auto;
            gap: 15px;
            margin-bottom: 15px;
        }

        input, select {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1em;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        button {
            padding: 12px 30px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        button:hover {
            background: #5568d3;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 30px;
        }

        .transactions {
            grid-column: 1 / -1;
        }

        .transaction-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .transaction {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .transaction:last-child {
            border-bottom: none;
        }

        .transaction-info {
            flex: 1;
        }

        .transaction-desc {
            font-weight: 600;
            color: #333;
        }

        .transaction-category {
            font-size: 0.85em;
            color: #999;
            margin-top: 3px;
        }

        .transaction-amount {
            font-weight: bold;
            margin-right: 15px;
            min-width: 100px;
            text-align: right;
        }

        .transaction-amount.income {
            color: #27ae60;
        }

        .transaction-amount.expense {
            color: #e74c3c;
        }

        .delete-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85em;
            transition: background 0.3s;
        }

        .delete-btn:hover {
            background: #c0392b;
        }

        .empty-message {
            text-align: center;
            color: #999;
            padding: 30px;
        }

        .category-breakdown {
            display: grid;
            gap: 12px;
        }

        .category-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .category-name {
            font-weight: 600;
            color: #333;
        }

        .category-amount {
            font-weight: bold;
            color: #e74c3c;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .form-group {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 768px) {
            .form-group {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ’° Budget Tracker</h1>

        <div class="cards">
            <div class="card income">
                <h2>Total Income</h2>
                <div class="amount" id="totalIncome">$0.00</div>
            </div>
            <div class="card expense">
                <h2>Total Expenses</h2>
                <div class="amount" id="totalExpense">$0.00</div>
            </div>
            <div class="card balance">
                <h2>Balance</h2>
                <div class="amount" id="balance">$0.00</div>
            </div>
        </div>

        <div class="section input-section">
            <h2>Add Transaction</h2>
            <div class="form-group">
                <input type="text" id="description" placeholder="Description">
                <input type="number" id="amount" placeholder="Amount" step="0.01" min="0">
                <select id="type">
                    <option value="expense">Expense</option>
                    <option value="income">Income</option>
                </select>
                <select id="category" style="display: none;">
                    <option value="groceries">Groceries</option>
                    <option value="phone">Phone Bills</option>
                    <option value="entertainment">Entertainment</option>
                    <option value="utilities">Utilities</option>
                    <option value="medical">Medical</option>
                    <option value="transport">Transport</option>
                    <option value="dining">Dining & Restaurants</option>
                    <option value="shopping">Shopping</option>
                    <option value="subscription">Subscriptions</option>
                    <option value="other">Other</option>
                </select>
                <select id="incomeCategory" style="display: none;">
                    <option value="salary">Salary</option>
                    <option value="freelance">Freelance</option>
                    <option value="investment">Investment</option>
                    <option value="bonus">Bonus</option>
                    <option value="other">Other</option>
                </select>
                <button onclick="addTransaction()">Add</button>
            </div>
        </div>

        <div class="main-content">
            <div class="section">
                <h2>Expense Breakdown</h2>
                <div class="chart-container">
                    <canvas id="expenseChart"></canvas>
                </div>
            </div>

            <div class="section">
                <h2>Income vs Expenses</h2>
                <div class="chart-container">
                    <canvas id="summaryChart"></canvas>
                </div>
            </div>

            <div class="section">
                <h2>Categories</h2>
                <div class="category-breakdown" id="categoryBreakdown">
                    <div class="empty-message">Add expenses to see breakdown</div>
                </div>
            </div>

            <div class="section">
                <h2>Spending Trend</h2>
                <div class="chart-container">
                    <canvas id="trendChart"></canvas>
                </div>
            </div>
        </div>

        <div class="section transactions">
            <h2>Recent Transactions</h2>
            <div class="transaction-list" id="transactionList">
                <div class="empty-message">No transactions yet. Add one to get started!</div>
            </div>
        </div>
    </div>

    <script>
        let transactions = [];
        let expenseChart, summaryChart, trendChart;

        const categoryColors = {
            groceries: '#FF6B6B',
            phone: '#4ECDC4',
            entertainment: '#45B7D1',
            utilities: '#FFA07A',
            medical: '#98D8C8',
            transport: '#F7DC6F',
            dining: '#BB8FCE',
            shopping: '#85C1E2',
            subscription: '#F8B088',
            other: '#BDC3C7',
            salary: '#27ae60',
            freelance: '#16A085',
            investment: '#2980B9',
            bonus: '#8E44AD'
        };

        function saveToLocal() {
            localStorage.setItem('budgetTrackerTransactions', JSON.stringify(transactions));
        }

        function loadFromLocal() {
            const saved = localStorage.getItem('budgetTrackerTransactions');
            if (saved) {
                try {
                    transactions = JSON.parse(saved);
                    updateDisplay();
                } catch (e) {
                    console.error('Error loading transactions:', e);
                }
            }
        }

        function updateCategorySelect() {
            const type = document.getElementById('type').value;
            document.getElementById('category').style.display = type === 'expense' ? 'block' : 'none';
            document.getElementById('incomeCategory').style.display = type === 'income' ? 'block' : 'none';
        }

        document.getElementById('type').addEventListener('change', updateCategorySelect);

        function addTransaction() {
            const desc = document.getElementById('description').value;
            const amt = parseFloat(document.getElementById('amount').value);
            const type = document.getElementById('type').value;
            const category = type === 'expense' ? 
                document.getElementById('category').value : 
                document.getElementById('incomeCategory').value;

            if (!desc || !amt || amt <= 0) {
                alert('Please fill in all fields with valid values');
                return;
            }

            const transaction = {
                id: Date.now(),
                description: desc,
                amount: amt,
                type: type,
                category: category,
                date: new Date().toLocaleDateString()
            };

            transactions.unshift(transaction);
            saveToLocal();
            updateDisplay();

            document.getElementById('description').value = '';
            document.getElementById('amount').value = '';
            document.getElementById('type').value = 'expense';
            updateCategorySelect();
        }

        function deleteTransaction(id) {
            transactions = transactions.filter(t => t.id !== id);
            saveToLocal();
            updateDisplay();
        }

        function updateDisplay() {
            const income = transactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);

            const expenses = transactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);

            document.getElementById('totalIncome').textContent = '$' + income.toFixed(2);
            document.getElementById('totalExpense').textContent = '$' + expenses.toFixed(2);
            document.getElementById('balance').textContent = '$' + (income - expenses).toFixed(2);

            updateTransactionList();
            updateCharts();
            updateCategoryBreakdown();
        }

        function updateTransactionList() {
            const listDiv = document.getElementById('transactionList');
            if (transactions.length === 0) {
                listDiv.innerHTML = '<div class="empty-message">No transactions yet. Add one to get started!</div>';
                return;
            }

            listDiv.innerHTML = transactions.map(t => `
                <div class="transaction">
                    <div class="transaction-info">
                        <div class="transaction-desc">${t.description}</div>
                        <div class="transaction-category">${t.category.charAt(0).toUpperCase() + t.category.slice(1)}</div>
                    </div>
                    <div class="transaction-amount ${t.type}">${t.type === 'income' ? '+' : '-'}$${t.amount.toFixed(2)}</div>
                    <button class="delete-btn" onclick="deleteTransaction(${t.id})">Delete</button>
                </div>
            `).join('');
        }

        function updateCategoryBreakdown() {
            const expenses = transactions.filter(t => t.type === 'expense');
            const breakdown = {};

            expenses.forEach(t => {
                breakdown[t.category] = (breakdown[t.category] || 0) + t.amount;
            });

            const sortedCategories = Object.entries(breakdown)
                .sort((a, b) => b[1] - a[1]);

            const breakdownDiv = document.getElementById('categoryBreakdown');
            if (sortedCategories.length === 0) {
                breakdownDiv.innerHTML = '<div class="empty-message">Add expenses to see breakdown</div>';
                return;
            }

            breakdownDiv.innerHTML = sortedCategories.map(([cat, amount]) => `
                <div class="category-item">
                    <div class="category-name">${cat.charAt(0).toUpperCase() + cat.slice(1)}</div>
                    <div class="category-amount">$${amount.toFixed(2)}</div>
                </div>
            `).join('');
        }

        function updateCharts() {
            updateExpenseChart();
            updateSummaryChart();
            updateTrendChart();
        }

        function updateExpenseChart() {
            const expenses = transactions.filter(t => t.type === 'expense');
            const breakdown = {};

            expenses.forEach(t => {
                breakdown[t.category] = (breakdown[t.category] || 0) + t.amount;
            });

            const ctx = document.getElementById('expenseChart').getContext('2d');
            if (expenseChart) expenseChart.destroy();

            expenseChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(breakdown).map(c => c.charAt(0).toUpperCase() + c.slice(1)),
                    datasets: [{
                        data: Object.values(breakdown),
                        backgroundColor: Object.keys(breakdown).map(cat => categoryColors[cat] || '#BDC3C7')
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        function updateSummaryChart() {
            const income = transactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);

            const expenses = transactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);

            const ctx = document.getElementById('summaryChart').getContext('2d');
            if (summaryChart) summaryChart.destroy();

            summaryChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Income', 'Expenses'],
                    datasets: [{
                        label: 'Amount',
                        data: [income, expenses],
                        backgroundColor: ['#27ae60', '#e74c3c']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function updateTrendChart() {
            const dailyData = {};

            transactions.forEach(t => {
                if (!dailyData[t.date]) {
                    dailyData[t.date] = { income: 0, expense: 0 };
                }
                if (t.type === 'income') {
                    dailyData[t.date].income += t.amount;
                } else {
                    dailyData[t.date].expense += t.amount;
                }
            });

            const sortedDates = Object.keys(dailyData).sort();
            const incomeData = sortedDates.map(d => dailyData[d].income);
            const expenseData = sortedDates.map(d => dailyData[d].expense);

            const ctx = document.getElementById('trendChart').getContext('2d');
            if (trendChart) trendChart.destroy();

            trendChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: sortedDates,
                    datasets: [
                        {
                            label: 'Income',
                            data: incomeData,
                            borderColor: '#27ae60',
                            backgroundColor: 'rgba(39, 174, 96, 0.1)',
                            tension: 0.3
                        },
                        {
                            label: 'Expenses',
                            data: expenseData,
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            tension: 0.3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        document.getElementById('amount').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') addTransaction();
        });

        loadFromLocal();
        updateCategorySelect();
    </script>
</body>
</html>